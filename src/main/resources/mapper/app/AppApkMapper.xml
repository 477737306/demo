<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cmit.testing.dao.app.AppApkMapper" >
  <resultMap id="BaseResultMap" type="com.cmit.testing.entity.app.AppApk" >
    <id column="apk_id" property="id" jdbcType="INTEGER" />
    <result column="apk_name" property="apkName" jdbcType="VARCHAR" />
    <result column="apk_version" property="apkVersion" jdbcType="VARCHAR" />
    <result column="pkg_name" property="pkgName" jdbcType="VARCHAR" />
    <result column="apk_type" property="apkType" jdbcType="INTEGER" />
    <result column="icon_path" property="iconPath" jdbcType="VARCHAR" />
    <result column="apk_url" property="apkUrl" jdbcType="VARCHAR" />
    <result column="apk_size" property="apkSize" jdbcType="VARCHAR" />
    <result column="apk_category" property="apkCategory" jdbcType="VARCHAR" />
    <result column="md5_code" property="md5Code" jdbcType="VARCHAR" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="create_person" property="createPerson" jdbcType="INTEGER" />
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="update_person" property="updatePerson" jdbcType="INTEGER" />
    <result column="create_name" property="createPersonName" jdbcType="VARCHAR" />
    <result column="update_name" property="updatePersonName" jdbcType="VARCHAR" />

  </resultMap>
  <sql id="Base_Column_List" >
    apk_id, apk_name, apk_version, pkg_name, apk_type, icon_path, apk_url, apk_size,
    apk_category, md5_code, create_time, create_person, update_time, update_person
  </sql>

  <select id="getApp" resultMap="BaseResultMap" parameterType="com.cmit.testing.entity.app.AppApk">
    SELECT <include refid="Base_Column_List" />
    FROM app_apk
    <where>
      <if test="id != null">
        AND apk_id = #{id, jdbcType=INTEGER}
      </if>
      <if test="apkName != null">
        AND apk_name = #{apkName, jdbcType=VARCHAR}
      </if>
      <if test="apkVersion != null">
        AND apk_version = #{apkVersion, jdbcType=VARCHAR}
      </if>
      <if test="pkgName != null">
        AND pkg_name = #{pkgName, jdbcType=VARCHAR}
      </if>
    </where>
    LIMIT 1
  </select>

  <select id="getListByAppInfo" resultMap="BaseResultMap" parameterType="com.cmit.testing.entity.app.AppApk">
    SELECT <include refid="Base_Column_List" />
    FROM app_apk
    <where>
      <if test="apkId != null">
        AND apk_id = #{apkId, jdbcType=INTEGER}
      </if>
      <if test="apkName != null">
        AND apk_name = #{apkName, jdbcType=VARCHAR}
      </if>
      <if test="apkVersion != null">
        AND apk_version = #{apkVersion, jdbcType=VARCHAR}
      </if>
      <if test="pkgName != null">
        AND pkg_name = #{pkgName, jdbcType=VARCHAR}
      </if>
    </where>
  </select>

  <select id="getApkIdByAppInfo" resultMap="BaseResultMap" parameterType="java.lang.String">
    SELECT <include refid="Base_Column_List" />
    FROM app_apk
    <where>
      <if test="appName != null">
        AND apk_name = #{appName, jdbcType=VARCHAR}
      </if>
      <if test="appVersion != null">
        AND apk_version = #{appVersion, jdbcType=VARCHAR}
      </if>
      <if test="pkgName != null">
        AND pkg_name = #{pkgName, jdbcType=VARCHAR}
      </if>
    </where>
  </select>

  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select
    <include refid="Base_Column_List" />
    from app_apk
    where apk_id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    delete from app_apk
    where apk_id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.cmit.testing.entity.app.AppApk" >
    insert into app_apk (apk_id, apk_name, apk_version,
      pkg_name, apk_type, icon_path, 
      apk_url, apk_size, apk_category, 
      md5_code, create_time, create_person, 
      update_time, update_person)
    values (#{id,jdbcType=INTEGER}, #{apkName,jdbcType=VARCHAR}, #{apkVersion,jdbcType=VARCHAR},
      #{pkgName,jdbcType=VARCHAR}, #{apkType,jdbcType=BIT}, #{iconPath,jdbcType=VARCHAR}, 
      #{apkUrl,jdbcType=VARCHAR}, #{apkSize,jdbcType=VARCHAR}, #{apkCategory,jdbcType=VARCHAR}, 
      #{md5Code,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP}, #{createPerson,jdbcType=INTEGER}, 
      #{updateTime,jdbcType=TIMESTAMP}, #{updatePerson,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="com.cmit.testing.entity.app.AppApk" useGeneratedKeys="true" keyProperty="id">
    insert into app_apk
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        apk_id,
      </if>
      <if test="apkName != null" >
        apk_name,
      </if>
      <if test="apkVersion != null" >
        apk_version,
      </if>
      <if test="pkgName != null" >
        pkg_name,
      </if>
      <if test="apkType != null" >
        apk_type,
      </if>
      <if test="iconPath != null" >
        icon_path,
      </if>
      <if test="apkUrl != null" >
        apk_url,
      </if>
      <if test="apkSize != null" >
        apk_size,
      </if>
      <if test="apkCategory != null" >
        apk_category,
      </if>
      <if test="md5Code != null" >
        md5_code,
      </if>
      <if test="createTime != null" >
        create_time,
      </if>
      <if test="createPerson != null" >
        create_person,
      </if>
      <if test="updateTime != null" >
        update_time,
      </if>
      <if test="updatePerson != null" >
        update_person,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="apkName != null" >
        #{apkName,jdbcType=VARCHAR},
      </if>
      <if test="apkVersion != null" >
        #{apkVersion,jdbcType=VARCHAR},
      </if>
      <if test="pkgName != null" >
        #{pkgName,jdbcType=VARCHAR},
      </if>
      <if test="apkType != null" >
        #{apkType,jdbcType=BIT},
      </if>
      <if test="iconPath != null" >
        #{iconPath,jdbcType=VARCHAR},
      </if>
      <if test="apkUrl != null" >
        #{apkUrl,jdbcType=VARCHAR},
      </if>
      <if test="apkSize != null" >
        #{apkSize,jdbcType=VARCHAR},
      </if>
      <if test="apkCategory != null" >
        #{apkCategory,jdbcType=VARCHAR},
      </if>
      <if test="md5Code != null" >
        #{md5Code,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createPerson != null" >
        #{createPerson,jdbcType=INTEGER},
      </if>
      <if test="updateTime != null" >
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updatePerson != null" >
        #{updatePerson,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.cmit.testing.entity.app.AppApk" >
    update app_apk
    <set >
      <if test="apkName != null" >
        apk_name = #{apkName,jdbcType=VARCHAR},
      </if>
      <if test="apkVersion != null" >
        apk_version = #{apkVersion,jdbcType=VARCHAR},
      </if>
      <if test="pkgName != null" >
        pkg_name = #{pkgName,jdbcType=VARCHAR},
      </if>
      <if test="apkType != null" >
        apk_type = #{apkType,jdbcType=BIT},
      </if>
      <if test="iconPath != null" >
        icon_path = #{iconPath,jdbcType=VARCHAR},
      </if>
      <if test="apkUrl != null" >
        apk_url = #{apkUrl,jdbcType=VARCHAR},
      </if>
      <if test="apkSize != null" >
        apk_size = #{apkSize,jdbcType=VARCHAR},
      </if>
      <if test="apkCategory != null" >
        apk_category = #{apkCategory,jdbcType=VARCHAR},
      </if>
      <if test="md5Code != null" >
        md5_code = #{md5Code,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createPerson != null" >
        create_person = #{createPerson,jdbcType=INTEGER},
      </if>
      <if test="updateTime != null" >
        update_time = #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updatePerson != null" >
        update_person = #{updatePerson,jdbcType=INTEGER},
      </if>
    </set>
    where apk_id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.cmit.testing.entity.app.AppApk" >
    update app_apk
    set apk_name = #{apkName,jdbcType=VARCHAR},
      apk_version = #{apkVersion,jdbcType=VARCHAR},
      pkg_name = #{pkgName,jdbcType=VARCHAR},
      apk_type = #{apkType,jdbcType=BIT},
      icon_path = #{iconPath,jdbcType=VARCHAR},
      apk_url = #{apkUrl,jdbcType=VARCHAR},
      apk_size = #{apkSize,jdbcType=VARCHAR},
      apk_category = #{apkCategory,jdbcType=VARCHAR},
      md5_code = #{md5Code,jdbcType=VARCHAR},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      create_person = #{createPerson,jdbcType=INTEGER},
      update_time = #{updateTime,jdbcType=TIMESTAMP},
      update_person = #{updatePerson,jdbcType=INTEGER}
    where apk_id = #{id,jdbcType=INTEGER}
  </update>

  <select id="selectByExample" resultMap="BaseResultMap" parameterType="com.cmit.testing.entity.app.AppApk" >
    SELECT
    a.apk_id,
    a.apk_name,
    a.apk_version,
    a.pkg_name,
    a.apk_type,
    a.icon_path,
    a.apk_url,
    a.apk_size,
    a.apk_category,
    a.md5_code,
    a.create_time,
    (select name FROM sys_user as u where u.id = a.create_person ) as create_name,
    a.update_time,
    (select name FROM sys_user as u where u.id = a.update_person) as update_name
    FROM app_apk as a
    <where>
      <if test="apkName != null and apkName != ''" >
        and apk_name LIKE CONCAT(CONCAT('%',TRIM(#{apkName})),'%')
      </if>
      <if test="apkVersion != null and apkVersion !=''" >
        and apk_version LIKE CONCAT(CONCAT('%',TRIM(#{apkVersion})),'%')
      </if>
      <if test="pkgName != null and pkgName !=''" >
        and pkg_name LIKE CONCAT(CONCAT('%',TRIM(#{pkgName})),'%')
      </if>
      <if test="apkType != null" >
        and apk_type = #{apkType}
      </if>
      <if test="iconPath != null" >
        and icon_path = #{iconPath}
      </if>
      <if test="apkUrl != null" >
        and apk_url = #{apkUrl}
      </if>
      <if test="apkSize != null" >
        and APP_SIZE = #{apkSize}
      </if>
      <if test="md5Code != null" >
        and md5_code = #{md5Code}
      </if>
      <if test="createTime != null" >
        and create_time = #{createTime}
      </if>
     <!-- <if test="createPersonName != null" >
        and u.name LIKE CONCAT(CONCAT('%',TRIM(#{createPersonName})),'%')
      </if>-->
      <if test="updateTime != null" >
        and update_time = #{updateTime}
      </if>
     <!-- <if test="updatePersonName != null" >
        and u.name  LIKE CONCAT(CONCAT('%',TRIM(#{updatePersonName})),'%')
      </if>-->
    </where>
  </select>
</mapper>